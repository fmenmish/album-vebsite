<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Music Album Catalog</title>
  <link rel="stylesheet" href="assets/css/styles.css">
  <script src="assets/js/session.js"></script>
  <script src="assets/js/cart.js"></script>
  <script type="text/javascript" src="//cdn.evgnet.com/beacon/i5568l55556pfu3vc3n3n3v091557685/fm_dev/scripts/evergage.min.js"></script>
</head>

<body>
  <header class="hero">
    <div class="hero-text">
      <h1>Music Album Catalog</h1>
      <p>Discover modern music albums across rock, metal, punk, and metalcore.</p>
    </div>
  </header>
  <div class="container">
    <section class="intro">
      <p>Welcome! Browse the catalog below to explore albums.</p>
    </section>

    <nav class="top-nav">
      <a href="category.html" class="home-button">Categories</a>
      <a href="bands.html" class="home-button">Bands</a>
      <a href="category.html" class="home-button">Categories</a>
      <div id="nav-right"></div>
      <div id="user-controls" class="user-controls"></div>
    </nav>
    <section class="catalog" id="catalog"></section>
  </div>

  <script src="data.js"></script>
  <script>
    const catalog = document.getElementById('catalog');
    albums.forEach((a, i) => {
      if (i % 3 === 0) {
        const row = document.createElement('div');
        row.className = 'row';
        catalog.appendChild(row);
      }
      const card = document.createElement('div');
      card.className = 'album-card';
      card.innerHTML = `
        <img src="${a.cover}" alt="${a.name}">
        <h3>${a.name}</h3>
        <p>By: <a href="band.html?name=${encodeURIComponent(a.band)}">${a.band}</a></p>
        <p>Released: ${a.releaseDate}</p>
        <p>Category: <a href="category/${a.category}.html">${a.category}</a></p>
        <p>Price: <span style="color:#ff3c3c;weight:bold;font-size:1.4em;">$${a.price}</span></p>
        <a href="albums/${a.id}.html"><button>View Album</button></a>
        <button class="cart-button" data-id="${a.id}">Add to Cart</button>
      `;
      catalog.lastChild.appendChild(card);
    });

    document.querySelectorAll('.cart-button').forEach(btn => {
      const albumId = btn.getAttribute('data-id');
      const cart = getCart();
      if (cart.includes(albumId)) {
        btn.textContent = "Remove from Cart";
        btn.classList.add("in-cart");
      }
      btn.addEventListener('click', () => toggleCart(albumId, btn));
    });
  </script>
</body>

</html>